---
title: 浅谈游戏功能测试用例设计  
date: 2018-07-31
author: wanglei
tags:
    - 测试
    - 黑盒
    - 用例
categories: 
    - 游戏测试
    - 功能测试
mathjax: true
---

#### 一、写在前面的话 ####
说起测试用例，第一次接触是在大学实习的时候，什么基本流、备选流，这么拗口的名字完全搞不懂是啥，再后来接触是为了校招笔试，百度了好久如何测试一个杯子，还有对判断三角形的程序进行用例设计。一晃四年过去了，写了很多用例了，最近突然觉得应该写点什么，所以就开始动笔吧。  
#### 二、什么是测试用例
我们平时提到的功能测试，也就是黑盒测试，往大了说就是点点点，往小了说就是按照规则点点点，而这个点点点的规则就是测试用例的一部分。  
  
那么，什么是测试用例呢，百度了下测试用例的概念：  
>测试用例（Test Case）是为某个特殊目标而编制的一组测试输入、执行条件以及预期结果，以便测试某个程序路径或核实是否满足某个特定需求  
  
概念比较抽象，对于黑盒测试来说，我们要给这个盒子一些输入，然后执行一些操作，会得到一个输出，然后我们需要判断得到的这个输出和我们希望得到的输出是否是一致的。我们将这些输入、操作、希望得到的输出以及是否结果是否一致做记录，就是用例。  
  
比如，这就是测试某个输入框功能的用例的一部分（PS：随手编的，不要太在意）  
![](https://ws2.sinaimg.cn/large/801b780agy1ftsfc1bwzzj213705u0su.jpg)

所以，一个用例中一定要表明这几个问题：   
1.要测试的功能是什么；  
2.要通过怎样的步骤才能测试这个功能；  
3.测试的过程中需要准备一些怎样的数据；  
4.对于这个功能我们的预期是什么；  
5.对于bug的记录。  
  
#### 三、测试用例格式
在继续深入之前，这里说一下用例的格式，事实上并不需要太拘泥于格式，上图我用的是excel，也可以用脑图，word，很多公司用的是一些特定的用例软件（比如禅道）。不同的公司，对于用例格式往往有不同的要求，但是无论用那种方式，都要保证用例的清晰，易读，易于维护。在评审用例的时候你会发现，一份清晰的用例是多么的赏心悦目。  
一份测试用例，除了包含基本的测试内容外，还要有很多的组成元素，这里我基于个人经验，大概的谈一谈  

**1.用例的名称**   
主要表明用例是测试哪些内容，像有些项目的策划文档都与一个独立系统相对，那测试用例就可以命名为：《策划文档名+测试用例》，比如《扭蛋系统测试用例.xlsx》。  

**2.用例的维护目录**     
我们知道用例会被多次执行，也会多次进行维护（比起发现错误完善用例外，设计上频繁变动是我们修改用例的主要原因）。所以有一个用于记录用例变动的目录是很重要的。  

下图是一个维护目录的示例  
![](https://ws1.sinaimg.cn/large/801b780agy1ftsfc1fs08j20t90bmjrl.jpg)
维护目录中还可以添加一些其他的元素，比如用例的执行目的、执行用例需要依赖的条件（比如用例需要某些权限，需要某些前置用例）等。  

**3.用例正文**  
这里主要是要阐明几点：测试场景、测试步骤、测试数据、预期结果、测试结果以及bug情况等。  
**测试场景**一般需要配上用例编号，编号可以是模块名+序号的形式（比较懒直接就用序号吧），编号起到一个识别的作用，比如“A系统的5号用例需要重新测试一下”，也可以方便其他用例引用比如“执行S1，S2，S3后，输入字符串，查看显示结果”；  
除了编号外也可以标注一下**测试路径**，比如基本流和备选流，或者称为主干和分支等，这样可以使用例更加易读一些；  
**测试步骤**同样按顺序标注序号，标号可以让用例看着清晰而有序；  
**测试数据**这个比较好理解，像上文测试输入框的时候，要输入多种不同的数据进行验证；  
**预期结果**这个是极为重要的一个部分，因为测试通过与否是依据预期结果的，这个要是不准确或者有纰漏，直接影响到测试的准确性；  
**测试结果**可以用P/F表示，P就是pass，F就是fail。当然，为了保持用例的纯洁，测试结果也可以不反映在用例上，放到相关的bug管理工具上。放在用例中可以方便下次回归测试时着重的关注一下。（ps：用excel做用例时，可以设置条件格式，区分P和F的颜色，一目了然）  

**4.测试需求**  
在测试过程中，尤其是在准备测试环境的时候，我们可能需要一些GM工具，或者一些权限比如数据库的，这种情况可以选择将其记录下来，便于回归测试或者其他人测试搭建环境时使用。   
事实上，多做记录还是有好处的，除了记录测试需求外，还可以当成一个备注，记录下测试中遇到的问题，难点，注意事项等等，正所谓前人栽树后人乘凉。    

**5.附录**  
说附录之前，说说excel的好处，excel除了可以分页签外还有强大的计算能力。    
![](https://ws4.sinaimg.cn/large/801b780agy1ftsfc19segj20cf01qmwx.jpg)
这里的附录主要是方便excel运算用的，游戏中的一些数值公式可以放在附录里展开，需要使用的时候直接填输入，就可以计算出输出。  

再举个例子，游戏里可能会有多语言信息，一般是程序里是一个id，然后策划去维护一个多语言总表，策划文档里往往这样写“点击确认按钮，弹出通用提示信息IM_0123"。我们在用例中，可以先把用到的相关im都从多语言总表里摘录到附录，之后我们用例里使用IM_123这个id时，做一个公式，将id从附录中索引成正常的文字提示 ，这样方便我们阅读，另外提示出现变动时，只要修改附录就好了（当然也可以直接从总表里索引出来，但是不建议跨表操作，表位置一旦有变化改起来很麻烦）。    

#### 四、如何开始一份用例
在这里，容我在啰嗦一段，同样基于我个人经验，说一说用例流程  
![](https://ws3.sinaimg.cn/large/801b780agy1ftsg9j3jjwj207d0ort9m.jpg)
这里我们只关注从评审到用例设计的部分，后续内容不在这篇文章讲了。    

**1.文档评审**  
说到文档评审，和一些测试同事聊过，发现有些公司策划文档评审竟然不带测试参与，内部定稿后直接连文档带测试需求丢到测试这边来了，这个是有问题的。  
首先策划在文档设计时是比较主观的，偏重的是设计上的可用性，所以容易忽视一些细节，甚至在描述上也容易出现其歧义的地方，测试则可以补足这一点，更关注设计的可行性，关联性，解决歧义的问题。另外策划的设计文档，是开发流程中最早，并且是十分重要部分，越早的暴露出设计问题，就可以极大地减少开发中的bug数量，从而节约开发成本。  
    
同样，在这里**举个例子**，比如公会里面的搜索按钮，某文档描述“点击搜索按钮后，根据输入框中输入的公会名，查找并列出符合的公会列表”，这句话有两个问题，一是这个查找是全词匹配还是模糊查找，区分大小写么，二是这个符合的，符合什么条件没有说清楚，比如名称匹配并且玩家满足加入条件的，还是说只要名称符合就好了。当然这个例子我编的可能不是很好，大概说明一下测试在文档分析上起到一个怎样的作用。  

我之前参与的项目，一般是策划内部评审完需求文档，然后会提交到测试这边分析，分析完在打回策划修改，反复多次，对于一些不能确定的问题记录下来，在文档敲定一版之后，在和程序美术一起做文档评审工作，然后在敲定终稿。  

**2.测试计划**  
测试计划可以理解为测试工作的一个提纲，起着规范和指导的作用。广义上的测试计划比较复杂，约束着整个产品开发过程中测试工作的进行，这个可以网上找到相关信息。  
我在这里提到的测试计划，只是一个基于个人经验的局部的功能测试上计划，仅仅服务于单个系统的功能测试。简单的来说，就是为了解决“我是谁？从哪来？到哪去？”的问题，在做测试计划之前，我们还需要了解很多外部信息，比如版本的截止日期，程序版本的提测日期，开发的人员配置，开发的风险等等。  

制定测试计划，首先要明确**测什么**。    
对于一个系统来说，可能包含很多模块（比如说一个装备系统，有界面，有数值，有强化打造逻辑等等），有些模块可能不在这次版本内测试，有些模块可能是分批次提交测试，有些模块可能是复用其他模块等等，我们这里需要明确测试范围，时间和人力的安排，也就是哪个测试人员，在什么时间，测哪些模块。  

其次要明确**怎么测**。  
这个比较好理解，测试要依赖哪些文档，需要在什么环境下（比如本次只在安卓系统上测试），可能会用到哪些资源（比如某些测试机，需要某些程序配合开发工具等）。 

最后要明确测试通过的**标准**。    
测试达到什么样的程度算是完成测试，比如冒烟测试通过即可，再比如这次测试要求最低优先级外的bug全部解决验证通过。  

当然，除了上述说的一些内容之外，还有一个比较重要的就是**测试风险**。  
风险包含很多个方面，比如研发上的风险，人员稳定性的风险，测试人员的水平，测试时间预估上的，测试资源上等等多个方面。有一些风险是要在测试中根据测试情况逐渐暴露出来的。  

测试计划可以写成很长很长的文档，网上有很多模板可以参考，但是如果是为了方便快捷的话，用简单的脑图概述一下主要内容就好了。  
比如下图这样(只是提供个样式，具体内容应该更细化)  
![](https://ws4.sinaimg.cn/large/801b780agy1ftsfc162w8j20l10iuaao.jpg)
测试计划制定一般需要内部消化一下，查缺补漏。  
另外测试计划中包含的测试任务部分，就是哪个某块，谁负责测试，什么时候开始什么时候结束等，可以将其独立成一份文档，方便及时跟进变化。  
  
**3.测试点整理**  
在开始正式设计用例前，一般需要先整理测试需求，然后归纳一下测试点，也可以说是整理测试场景，测试点主要起到一个提纲或者说目录的作用。测试点的提取依赖于需求，需求源于文档，所以有一份靠谱的策划文档可以极大地提高整理效率。  
我个人在提取测试点一般是使用以下方式，仅供参考（再次强调一下，这里只讲功能，专项测试相关内容不再考虑范围内）  
  
比如网上经常看到的用例设计里的登录界面  
![](https://ws3.sinaimg.cn/large/801b780agy1ftsfc0ztvyj21hc0u0mz3.jpg)
首先，所见即所得。  
一般文档上会有一些ui设计，我们可以先按照ui提取一波测试点，当然可能文档上什么都没有，没有忽略这步了，这一步只是起到辅助作用。  
图里有6中东西，我们可以先把他们都列出来  
![](https://ws1.sinaimg.cn/large/801b780agy1ftsfc0voxyj20el08g0sn.jpg)
在规整一下  
![](https://ws2.sinaimg.cn/large/801b780agy1ftsfc0r25ij20lo0a30sz.jpg)
这里界面方面之后不提了，无非就是风格呀布局呀适配呀之类的内容。  
然后，区分主流程和分支流程。  
这里如果比较勤快的话，可以先画出一个大致的流程图（好的策划文档一般会有提供），当然如果对文档有比较深刻的理解，这一步自然可以省略。我们需要根据流程图或者文档找到主流程，比如登录的主流程输入正确的账号和密码，点登录，验证通过登录成功。与主流程对应的就是分支流程（也就是备选流），是指不满足主流程的某些条件时所进行的流程  
这一过程和场景法确定场景类似，每一个测试点相当于一个测试场景  
![](https://ws2.sinaimg.cn/large/801b780agy1ftsfc0n2opj20nj0bfq36.jpg)
最后再根据文档也好，自己的经验也好，进行一些修改和扩展  
![](https://ws2.sinaimg.cn/large/801b780agy1ftsfc0ii3wj20nh0h8jrz.jpg)
到此，测试点整理完毕。出于各种原因，测试点往往会有遗漏的情况（比如刚想到上面的登录可能有音效），有条件的话建议可以交给组内的成员审阅一下，查缺补漏，自己也应当勤于思考，发现不足之处。  

**4.测试用例设计**  
提到测试用例设计，通常的方法是等价类划分，边界值分析，错误推测，因果图，判定表，正交试验等等，这些网上都有相关的说明和详细的讲解。  
关于因果图，我对它的印象就是复杂、麻烦。我觉得与其画个因果图在去产出判定表，不如直接推出判定表然后删掉冗余数据，从而得到最终组合情况。  
关于正交试验法，适用于组合数多的情况，比如7个属性，每个属性可以取2种值，按照正常的排列组合需要2的7次幂，也就是128种组合，但是按照正交表，用8种组合就可以覆盖了。所以遇到符合正交表的情况，记得去查表。目前遇到$L_4(2^3)$的情况还是很多的，不过排列组合才8种情况，所以我一般还是枚举出来。  

OK，书归正文，我们上面已经分好了测试点，这里设计用例大部分内容还是以细化测试点为主。  
还是举例说明，比如这个分支  
![](https://ws2.sinaimg.cn/large/801b780agy1ftsfc0ezu0j205g036a9t.jpg)
先不考虑顶号，账号密码错误，根据等价类划分，这些都是属于无效等价类，按照排列组合共4种情况，但是，空值比较特殊，作为边界值，单独拿出来处理，又多3种情况  
![](https://ws2.sinaimg.cn/large/801b780agy1ftsfc0cww4j207504w743.jpg)
所以设计这个分支用例的时候就要列举这6种情况（全正确是在主流程里）  
![](https://ws1.sinaimg.cn/large/801b780agy1ftsfc0agfgj20z906kaa0.jpg)
当然，为了方便的话，可以直接列表格，不用写这么麻烦，具体看用例格式要求  
![](https://ws1.sinaimg.cn/large/801b780agy1ftsfc073qwj208o04wwea.jpg)
在看一下这个测试点  
![](https://ws4.sinaimg.cn/large/801b780agy1ftsfc049opj20dn043q2r.jpg)
假如说需求账号输入框只能输入5-10个字母，所以可以分一下等价类，有效等价类就是5-10位的字母，无效等价类就是非字母，小于5位的字母，大于10位的字母，所以设计用例数据选择的时候，要包含上述内容。然后在考虑到5和10等边界值问题，就拆成以下数据  
![](https://ws2.sinaimg.cn/large/801b780agy1ftsfc02fbuj204j049dfl.jpg)
另外还要考虑到字母的大小写，非字母有包括数字，字符，空格等，还有全角半角之类的，很多很多情况。  
对于这种数据很多的情况，用例设计时可以考虑列表把选择的数据列出，也可以考虑数据选择合并起来，比如  
![](https://ws3.sinaimg.cn/large/801b780agy1ftsfig6ky7j20fe04ma9v.jpg)
不过说起来输入框本身还是比较复杂的，之前遇到过输入%s崩溃，但是%+其它字符不崩溃的情况，还有往输入框里粘贴图片崩溃等等。  
这里在提及一下错误推断法，网上的定义是“
>基于经验和直觉推测程序中所有可能存在的各种错误,从而有针对性地设计测试用例的方法
就像上文提到粘贴图片崩溃的问题，在设计用例时，可以专门设计这样有针对性的用例，就是错误推断法的应用。有的时候也要根据开发者的风格进行错误推断，比如有些开发者在处理浮点数运算的时候总是取整后在运算，而不是运算后取整，这时候设计用例时，就要关注一下这种情况。  

还想说的是，一份好的用例肯定是简洁明了、短小精悍的，但是设计出这样的用例除了经验之外，还要花费很大的精力的，在游戏测试这种加班如狗坐看策划改需求的现状，往往没有充足的时间去设计用例，这种时候建议宁可多写，宁愿冗余，也不要盲目的贪图效率，去删减冗余的用例  
#### 五、后记  
由于时间的关系，这篇文章从动笔到结束，断断续续的持续一周的时间，所以文章中难免有遗漏和不足，甚至有很多突然冒出来的想法，转天就忘了，囧rz。不过既然能把它写完，也算是一个不错的开始吧。  















































